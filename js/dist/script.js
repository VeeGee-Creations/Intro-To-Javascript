let pokemonRepository=function(){const e="https://pokeapi.co/api/v2/pokemon/?limit=-1";function t(e,t){const i=[],a=document.querySelector("#pokelist");for(;e.length;)i.push(e.splice(0,t));$(function(){$(".simple-pagination").pagination({items:i.length,itemsOnPage:1,displayedPages:10,currentPage:1,cssStyle:"light-theme",onInit:function(){const e=$(function(){return $(".simple-pagination").pagination("getCurrentPage")}),t=function(){return e[0].URL.match(/\d+/)?parseInt(e[0].URL.match(/\d+/)[0]):1};$(function(){$(".simple-pagination").pagination("drawPage",t())}),a.innerHTML="",n(t(),i),o(i[t()-1])},onPageClick:function(e){a.innerHTML="",n(e,i),o(i[e-1])}})})}function n(e,t){const n=JSON.parse(localStorage.getItem("pokemon")).length,o=t.length,i=document.querySelector("#pokeCount");o<2&&(i.textContent=`${t[0].length} of ${n} Pokemon`),o>1&&(i.textContent=`${16*e-15}-${Math.min(16*e,n)} of ${n} Pokemon`)}function o(e){e.map(e=>{const t=document.querySelector("#pokelist"),n=document.createElement("li"),o=document.createElement("button");o.innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1),o.classList.add("pokebutton"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#pokemonModal"),n.appendChild(o),t.appendChild(n),o.addEventListener("click",function(){!async function(e){await async function(e){return await fetch(e.url).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height,e.types=t.types,e.weight=t.weight,e.abilities=t.abilities}).catch(function(e){console.error(e)})}(e).then(()=>{const t=e.name.charAt(0).toUpperCase()+e.name.slice(1),n=e.imageUrl,o=`Height: ${e.height/10}m\n\n            Weight: ${e.weight/10}kg\n\n            Types: ${e.types.map(e=>e.type.name).join(", ")}\n\n            Abilitites: ${e.abilities.map(e=>e.ability.name).join(", ")}`;!function(e,t,n){const o=document.querySelector("#pokemonModalLabel"),i=document.querySelector(".modal-body"),a=document.createElement("img"),r=document.createElement("p");o.innerText=e,o.setAttribute("tabindex","0"),i.innerHTML="",t&&a.setAttribute("src",t),a.setAttribute("id","pokemon-img"),a.setAttribute("alt",e+"-image"),r.innerText=n,r.setAttribute("tabindex","0"),i.appendChild(a),i.appendChild(r)}(t,n,o)})}(e)})})}function i(){const e=JSON.parse(localStorage.getItem("pokemon")),n=document.getElementById("search-input").value.toLowerCase(),o=new RegExp(n,"g"),i=document.querySelector("#pokelist");i.innerHTML="";const a=e.filter(e=>e.name.match(o));a.length>1&&i.removeAttribute("style","columns: 1"),a.length<2&&i.setAttribute("style","columns: 1"),history.pushState?history.pushState(null,null,"#page-1"):location.hash="#page-1",t(a,16)}return{onLoad:function(){localStorage.getItem("pokemon").length<1&&async function(){const t=await(await fetch(e).catch(function(e){console.error(e)})).json();return await t}().then(e=>localStorage.setItem("pokemon",JSON.stringify(e.results))).then(()=>{t(JSON.parse(localStorage.getItem("pokemon")))}).catch(e=>console.error(e)),t(JSON.parse(localStorage.getItem("pokemon")),16)},searchListener:function(){const e=document.querySelector("#search-button"),t=document.querySelector("#search-input");e.addEventListener("click",i),t.addEventListener("search",i)}}}();pokemonRepository.onLoad(),pokemonRepository.searchListener();